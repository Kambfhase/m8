/*!
 * m8 - JavaScript Math Library - v0.2
 * by Kambfhase
 * released under MIT License 
 *
 * includes vice-versa by Andrea Giammarchi
 */
 (function(b,c){var a=(function(){function d(h,i,f){for(var g in h){i.call(f,h[g],g,h)}}for(var e in {toString:null}){if(e==="toString"){return d}}return(function(){for(var g="constructor.hasOwnProperty.isPrototypeOf.propertyIsEnumerable.toLocaleString.toString.valueOf".split("."),h=[],f=g.length;f--;){h[f]=['hasOwnProperty.call(o,"','")&&callback.call(self,o.',',"','",o);'].join(g[f])}return Function("hasOwnProperty",d+";return function(o,callback,self){forIn(o,callback,self);"+h.join("")+"};")(c)})()})();if(!b.defineProperty){b.defineProperty=(function(){function e(g,f){if(c.call(g,"value")){this[f]=g.value}else{if(c.call(g,"get")){this.__defineGetter__(f,g.get)}if(c.call(g,"set")){this.__defineSetter__(f,g.set)}}}function d(h,f,g){if(c.call(g,"value")){h[f]=g.value}else{if(c.call(g,"get")){h.__defineGetter__(f,g.get)}if(c.call(g,"set")){h.__defineSetter__(f,g.set)}}return h}return d})()}if(!b.defineProperties){b.defineProperties=(function(){function e(g,f){b.defineProperty(this,f,g)}function d(f,g){a(g,e,f);return f}return d})()}if(!b.create){b.create=(function(){function e(){}function d(f,g){f=new e(e.prototype=f);e.prototype=null;return g?b.defineProperties(f,g):f}return d})()}if(typeof b.keys!=="function"){b.keys=function(d){var e=[],f;for(f in d){if(c.call(d,f)){e.push(f)}}return e}}if(!b.getPrototypeOf){b.getPrototypeOf=(function(){function d(e){return e.__proto__}return{}.__proto__===b.prototype?d:function(e){if(e instanceof b&&e instanceof e.constructor){return e.constructor.prototype}}})()}if(!b.getOwnPropertyDescriptor){b.getOwnPropertyDescriptor=function(e,d){if(d in e){return{value:e[d]}}}}if(!b.getOwnPropertyNames){b.getOwnPropertyNames=b.keys}})(Object,Object.prototype.hasOwnProperty);var Class=(function(b){var a,c=b.getOwnPropertyNames(function(){});a=function(k){var d=function(){return d.create.apply(d,arguments)},h,e,l,g=k.parent,f=k["static"],j=k.instance;if(g){h=b.getOwnPropertyNames(g);e=h.length;while(e--){l=h[e];if(c.indexOf(l)==-1){d=b.defineProperty(d,l,b.getOwnPropertyDescriptor(g,l))}}}if(f){d=b.defineProperties(d,f)}d.prototype=b.create((g&&g.prototype||b.prototype),j);d.prototype=b.defineProperty(d.prototype,"constructor",{value:d,enumerable:false,configurable:true,writable:true});if(!d.create){d.create=function(){return b.create(this.prototype)}}if(!d.is){d.is=function(i){return this.prototype.isPrototypeOf(i)}}return d};a=a({"static":{create:{value:a,enumerable:false,configurable:true,writable:true}}});return a})(Object);var Collection=(function(){var a=Class({parent:Array,"static":{create:{value:function(b){var d=Object.create(this.prototype),c=b.length;while(c--){d[c]=b[c]}return d}}},instance:{length:{value:0,configurable:true},toArray:{value:function(){return this.slice()}},toString:{value:function(){return this.slice().toString()}},}});a.prototype=(function(b){return Object.defineProperty(b,"length",{get:function(){return Object.keys(this).length},set:function(c){if(c>=this.length){this[c]=undefined}}})})(a.prototype);return a})();var MatrixBase=(function(){var a=Class.create({parent:Array,"static":{create:{value:function(b){return this.wrap(arguments.length>1?this.rectangle.apply(this,arguments):b)},enumerable:false,configurable:true,writable:true},wrap:{value:function(b){var d=Object.create(this.prototype),c=b.length;while(c--){d[c]=b[c].slice()}return d},enumerable:false,configurable:true,writable:true},rectangle:{value:function(c,h,e){var g,f=c,d=h,b=[];e=e===undefined?0:e;while(f--){g=[];d=h;while(d--){g[d]=e}b[f]=g}return b},enumerable:false,configurable:true,writable:true},deepArrayCopy:{value:function(b){if(Array.prototype.isPrototypeOf(b)||b.map){return b.map(this.deepArrayCopy,this)}else{return b}},enumerable:false,configurable:true,writable:true},sameDimensions:{value:function(){var c=arguments.length-1,d=arguments[c].length,b=arguments[c][0].length;while(c--){if(d!==arguments[c].length||b!==arguments[c][0].length){return false}}return true},enumerable:false,configurable:true,writable:true},precision:{value:0.000001,enumerable:false,configurable:true,writable:true}},instance:{copy:{value:function(){return this.constructor.create(MatrixBase.deepArrayCopy(this))},enumerable:false,configurable:true,writable:true},toArray:{value:function(){return this.slice()},enumerable:false,configurable:true,writable:true},toString:{value:function(){return JSON.stringify(this.toArray())},enumerable:false,configurable:true,writable:true},length:{value:0,enumerable:false,configurable:true,writable:true},transpose:{value:function(){var c,d=this[0].length,b=this.length,e=[];while(d--){c=b;e[d]=[];while(c--){e[d][c]=this[c][d]}}return this.constructor.create(e)},enumerable:false,configurable:true,writable:true},scale:{value:function(b){var e=[],d=this.length,c,f;while(d--){f=[];c=this[d].length;while(c--){f[c]=this[d][c]*b}e[d]=f}return this.constructor.create(e)},enumerable:false,configurable:true,writable:true},add:{value:function(b){var e=[],d=this.length,c,f;while(d--){f=[];c=this[d].length;while(c--){f[c]=this[d][c]+b[d][c]}e[d]=f}return this.constructor.create(e)},enumerable:false,configurable:true,writable:true},mult:{value:function(b){var g=[],e=0,d,c,f,h=b[0].length;for(;e<this.length;++e){g[e]=[];for(d=0;d<h;++d){f=0;for(c=0;c<this[e].length;++c){f+=this[e][c]*b[c][d]}g[e][d]=f}}return this.constructor.create(g)},enumerable:false,configurable:true,writable:true},equals:{value:function(b){var d=this.length,c;if(d!==b.length){return false}while(d--){c=this[d].length;if(c!==b[d].length){return false}while(c--){if(Math.abs(this[d][c]-b[d][c])>MatrixBase.precision){return false}}}return true},enumerable:false,configurable:true,writable:true}}});a.prototype=(function(b){return Object.defineProperty(b,"length",{get:function(){return Object.keys(this).length},set:function(c){if(c>=this.length){this[c]=undefined}}})})(a.prototype);return a})();var Matrix=(function(c){var b,e,d,a;a={create:{value:function(f){return this.wrap(arguments.length>1?this.rectangle.apply(this,arguments):f)},enumerable:false,configurable:true,writable:true},like:{value:function(f){return this.isRectangular(f)},enumerable:false,configurable:true,writable:true},isRectangular:{value:function(f){var g=1,h=f[0].length;for(;g<f.length;++g){if(f[g].length!==h){return false}}return true},enumerable:false,configurable:true,writable:true},isSquare:{value:function(f){return f.length===f[0].length&&this.isRectangular(f)},enumerable:false,configurable:true,writable:true},isTriangular:{value:function(g){var f=g.length,p=g[0].length,k,l,h,o;l=f;while(l--){k=p;o=g[l];while(k--){if(l===k||!o[k]){continue}if(!h){h=(l>k?-1:1);continue}if(h===(l>k?-1:1)){continue}return 0}}return h||2},enumerable:false,configurable:true,writable:true},identity:{value:function(j){var f=[],h=0,g;for(;h<j;++h){f[h]=[];for(g=0;g<j;++g){f[h][g]=h===g?1:0}}return this.wrap(f)},enumerable:false,configurable:true,writable:true},householder:{value:function(f){var h=Vector(f).normalize(),g=h.length;return b.identity(g).add(h.mult(h.transpose()).scale(-2))},enumerable:false,configurable:true,writable:true},det:{value:function(g){var j=0,f=g.length,l=g[0].length,k=l,h;if(f===1){return g[0][0]}if(f===2){return g[0][0]*g[1][1]-g[0][1]*g[1][0]}if(!!b.isTriangular(g)){j=1;while(k--){j*=g[k][k]}return j}else{h=g[0];while(k--){if(h[k]){j+=h[k]*(k&1?-1:1)*b.det(b.cut(g,0,k))}}return j}},enumerable:false,configurable:true,writable:true},cut:{value:function(f,k,h){var g=f.slice(0,k).concat(f.slice(k+1));g=g.map(function(i){return i.slice(0,h).concat(i.slice(h+1))});return g},enumerable:false,configurable:true,writable:true}};d={add:{value:function(f){if(!b.sameDimensions(this,f)){throw new TypeError("this.add( other): Only Matrices of the same Dimensions kann be added. this: "+this.toString()+" other: "+b.prototype.toString.call(f))}return b.wrap(MatrixBase.prototype.add.call(this,f))},enumerable:false,configurable:true,writable:true},multWMatrix:{value:function(f){if(this[0].length!==f.length){throw new TypeError("this.mult( other): The matrices dimensions mismatch! this: "+this.toString()+" other: "+f)}return b.wrap(MatrixBase.prototype.mult.call(this,f))},enumerable:false,configurable:true,writable:true},mult:{value:function(f){if(typeof f==="number"){return this.scale(number)}else{if(b.is(f)||b.like(f)){return this.multWMatrix(f)}else{if(f.toMatrix){return this.multWMatrix(f.toMatrix())}}}},enumerable:false,configurable:true,writable:true},adjugate:{value:function(){if(!b.isSquare(this)){throw new TypeError("this.adjugate(): there is no adjugate matrix for non square matrixes. this:"+this.toString())}if(this.length===1){return this.copy()}var f=[],l=this[0].length,h=l,g,k;while(h--){k=[];g=l;while(g--){k[g]=((h^g)&1?-1:1)*b.prototype.det.call(b.cut(this,g,h))}f[h]=k}return b.wrap(f)},enumerable:false,configurable:true,writable:true},invert:{value:function(){if(!b.isSquare(this)){throw new TypeError("this.invert(): there is no inverted matrix for non square matrixes. this:"+this.toString())}if(this.length===1){return b.create([[1/this[0][0]]])}return this.adjugate().scale(1/this.det())},enumerable:false,configurable:true,writable:true},row:{value:function(f){return this[f]},enumerable:false,configurable:true,writable:true},col:{value:function(f){var h=[],g=0;for(;g<this.length;g++){h[g]=this[g][f]}return h},enumerable:false,configurable:true,writable:true},det:{value:function(){if(!b.isSquare(this)){return null}var f=this.length,q=1;if(f===1){return this[0][0]}if(f===2){return this[0][0]*this[1][1]-this[1][0]*this[0][1]}if(b.isTriangular(this)){while(f--){q*=this[f][f]}return q}else{var p,l,g,r,o,h,m=b.deepArrayCopy(this);for(p=0;p<f;p++){o=m[p];if(!o[p]){for(l=p+1;l<f;l++){h=m[l];if(h[p]){for(g=p;g<f;g++){o[g]+=h[g]}}break}}if(o[p]){for(l=p+1;l<f;l++){h=m[l];r=h[p]/o[p];if(r){for(g=p;g<f;g++){h[g]-=o[g]*r}}}q*=o[p]}else{return 0}}return q}},enumerable:false,configurable:true,writable:true},equals:{value:function(f){if(!b.sameDimensions(this,f)){return false}return MatrixBase.prototype.equals.call(this,f)},enumerable:false,configurable:true,writable:true}};b=Class.create({"static":a,instance:d,parent:MatrixBase});return b})(window);var Vector=Class.create({parent:Collection,"static":{like:{value:function(a){if((Array.prototype.isPrototypeOf(a)||"length" in a)&&typeof a[0]==="number"){return true}else{return false}},enumerable:false,configurable:true,writable:true},sameDimensions:{value:function(){var b=arguments.length,a=arguments[--b].length;while(b--){if(arguments[b].length!==a){return false}}return true},enumerable:false,configurable:true,writable:true},standardScalarproduct:{value:function(d,c){if(!this.sameDimensions(d,c)){throw new TypeError("Vector-Dimensions mismatch!")}var e=0,f=d.length;while(f--){e+=d[f]*c[f]}return e},enumerable:false,configurable:true,writable:true},precision:{value:0.000001,enumerable:false,configurable:true,writable:true}},instance:{sameDimensions:{value:function(a){if(arguments.length===1){return this.length===a.length}else{return this.constructor.sameDimensions.apply(this.constructor,arguments.push(this))}},enumerable:false,configurable:true,writable:true},toArray:{value:function(){return this.slice()},enumerable:false,configurable:true,writable:true},copy:{value:function(){return this.constructor.create(this.slice())},enumerable:false,configurable:true,writable:true},toMatrix:{value:function(){var b=[],a=this.length;while(a--){b[a]=[this[a]]}return Matrix.create(b)},enumerable:false,configurable:true,writable:true},magnitude:{value:function(){var a=0,b=this.length;while(b--){a+=this[b]*this[b]}return Math.pow(a,0.5)},enumerable:false,configurable:true,writable:true},equals:{value:function(a,b){b=b===undefined?this.constructor.precision:b;if(!this.sameDimensions(a)){return false}var c=this.length;while(c--){if(Math.abs(this[c]-a[c])>b){return false}}return true},enumerable:false,configurable:true,writable:true},scale:{value:function(a){var c=[],b=this.length;while(b--){c[b]=this[b]*a}return this.constructor.create(c)},enumerable:false,configurable:true,writable:true},normalize:{value:function(){return this.scale(1/this.magnitude())},enumerable:false,configurable:true,writable:true},add:{value:function(a){var c=[],b=this.length;if(!this.sameDimensions(a)){throw new TypeError("Vector-Dimensions mismatch")}while(b--){c[b]=this[b]+a[b]}return this.constructor.create(c)},enumerable:false,configurable:true,writable:true},dot:{value:function(a){if(!this.sameDimensions(a)){throw new TypeError("Vector-Dimension mismatch")}var b=0,c=this.length;while(c--){b+=this[c]*a[c]}return b},enumerable:false,configurable:true,writable:true},multWMatrix:{value:function(a){},enumerable:false,configurable:true,writable:true},mult:{value:function(a){var b=this.constructor;if(typeof a==="number"){return this.scale(a)}else{if(hVector.is(a)||hVector.like(a)){return(function(){var g=this.length,d=g,c,e=[],f;while(d--){c=g;f=[];while(c--){f[c]=this[d]*a[c]}e[d]=f}return Matrix.create(e)}).call(this)}else{if(Matrix.is(a)||Matrix.like(a)){return this.multWMatrix(a)}else{if(b.is(a)||b.like(a)){return this.dot(a)}}}}},enumerable:false,configurable:true,writable:true}}}),hVector=Class({parent:Vector,"static":{like:{value:function(a){return Vector.like(a)&&a.horizontal}}},instance:{horizontal:{value:true,enumerable:false,configurable:true,writable:true},}});var binom=function(c,a){var b=1;if(a>(c/2)){a=c-a}while(a){b*=c+1-a;b/=a;a--}return b};var fibonacci=(function(a){var c=(1+a.sqrt(5))/2,b=(1-a.sqrt(5))/2;return function(d){return d<=2?d&&1:a.round((a.pow(c,d)-a.pow(b,d))/a.sqrt(5))}})(Math);var factorial=function(b){if(b<2){return 1}var a=1;while(b){a*=b--}return a};var Complex=Class({parent:Number,"static":{create:{value:function(c,a){var b=Object.create(this.prototype);b.r=c||0;b.i=a||0;return b},enumerable:false,configurable:true,writable:true},precision:{value:0.000001,enumerable:false,configurable:true,writable:true},zero:{value:function(){return this.create(0,0)},enumerable:false,configurable:true,writable:true},one:{value:function(){return this.create(1,0)},enumerable:false,configurable:true,writable:true}},instance:{copy:{value:function(){return this.constructor.create(this.r,this.i)},enumerable:false,configurable:true,writable:true},valueOf:{value:function(){return this.r},enumerable:false,configurable:true,writable:true},toString:{value:function(){return this.r+(this.i<0?""+this.i:"+"+this.i)+"i"},enumerable:false,configurable:true,writable:true},equals:{value:function(a){return Math.abs(this.r-a.r)<this.constructor.precision&&Math.abs(this.i-a.i)<this.constructor.precision},enumerable:false,configurable:true,writable:true},conjugate:{value:function(){return this.constructor.create(this.r,-this.i)},enumerable:false,configurable:true,writable:true},add:{value:function(a){return this.constructor.create(this.r+a.r,this.i+a.i)},enumerable:false,configurable:true,writable:true},sub:{value:function(a){return this.constructor.create(this.r-a.r,this.i-a.i)},enumerable:false,configurable:true,writable:true},mult:{value:function(a){return this.constructor.create(this.r*a.r-this.i*a.i,this.r*a.i+this.i*a.r)},enumerable:false,configurable:true,writable:true},div:{value:function(a){var b=1/(a.r*a.r+a.i*a.i);return this.constructor.create((this.r*a.r+this.i*a.i)*b,(this.i*a.r-this.r*a.i)*b)},enumerable:false,configurable:true,writable:true}}});